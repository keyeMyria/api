# -*- mode: conf -*-
[program:celery]
# [program:daphne-{{domain}}]
command={{vebin}}/celery -A pashinin worker --loglevel=ERROR --pidfile={{repo}}/tmp/celery.pid
# command=/pyenvs/xdev/bin/celery -A proj worker --loglevel=ERROR --beat --pidfile=/var/www/xdev/tmp/celery.pid -s /var/www/xdev/tmp/celerybeat-schedule
#command=&#x2F;pyenvs&#x2F;xdev&#x2F;bin/celery -A proj worker --loglevel=WARNING
#command=&#x2F;pyenvs&#x2F;xdev&#x2F;bin/celery -A proj worker --loglevel=INFO

# no workers with this:
# {% if DEBUG %} --autoreload {% endif %}

directory={{repo}}/src
user=www-data
numprocs=1
stderr_logfile=/var/log/supervisor/celery-{{domain}}.err.log
stdout_logfile=/var/log/supervisor/celery-{{domain}}.out.log
autostart=true
autorestart=true
startsecs=10
# Need to wait for currently executing tasks to finish at shutdown.
# Increase this if you have very long running tasks.
stopwaitsecs = 10
# When resorting to send SIGKILL to the program to terminate it
# send SIGKILL to its whole process group instead,
# taking care of its children as well.
killasgroup=true
# if rabbitmq is supervised, set its priority higher
# so it starts first
priority=998
