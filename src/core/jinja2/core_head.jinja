<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="alternate" hreflang="ru" href="https://pashinin.com{{request.path}}" />
<link rel="shortcut icon" href="{{ static("favicon.png") }}" />
{% if not DEBUG %}
<script src="{{ static("js/libs/raven.min.js") }}"></script>
<script>
// configure the SDK as you normally would
Raven.config('https://{{RAVEN_PUBLIC}}@sentry.pashinin.com/2').install();

/**
 * Report a routing error to Sentry and show a feedback dialog to
 * the user.
 *
 * > try {
 * >   renderRoute()
 * > } catch (err) {
 * >   handleRouteError(err);
 * > }
 */
function handleRouteError(err) {
  Raven.captureException(err);
  // Raven.showReportDialog();
};
</script>
{% endif %}

{# https://github.com/github/fetch #}
<script type="text/javascript">
if (typeof fetch !== "function") {
var d = document,
h = d.getElementsByTagName('head')[0],
s = d.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = "{{ static("js/libs/fetch.min.js") }}";
h.appendChild(s);
};
</script>

{# Array.from polyfill, Chrome < 45 #}
{# https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Polyfill #}
<script type="text/javascript">if(!Array.from){Array.from=function(){var toStr=Object.prototype.toString;var isCallable=function(fn){return typeof fn==="function"||toStr.call(fn)==="[object Function]"};var toInteger=function(value){var number=Number(value);if(isNaN(number)){return 0}if(number===0||!isFinite(number)){return number}return(number>0?1:-1)*Math.floor(Math.abs(number))};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};return function from(arrayLike){var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=="undefined"){if(!isCallable(mapFn)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){T=arguments[2]}}var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==="undefined"?mapFn(kValue,k):mapFn.call(T,kValue,k)}else{A[k]=kValue}k+=1}A.length=len;return A}}()}</script>
{# .matches #}
<script type="text/javascript">(function(e){e.matches||(e.matches=e.matchesSelector||function(selector){var matches=document.querySelectorAll(selector),th=this;return Array.prototype.some.call(matches,function(e){return e===th})})})(Element.prototype);</script>
{# .closest #}
<script type="text/javascript">(function(e){e.closest=e.closest||function(css){var node=this;while(node){if(node.matches(css))return node;else node=node.parentElement}return null}})(Element.prototype);</script>


<script defer src="{{ static("js/serialize.min.js") }}"></script>

{% if momentjs %}
  <script defer src="{{ static("js/libs/moment.min.js") }}"></script>
  <script defer src="{{ static("js/libs/moment-timezone-with-data.min.js") }}"></script>
  <script defer src="{{ static("js/libs/moment.ru.min.js") }}"></script>
{% endif %}

{% if dragula %}
<script defer src="{{ static("dragula/3.7.2.mini.js") }}"></script>
{% endif %}
{% if DEBUG %}<script src="{{static("js/livereload.mini.js")}}"></script>{% endif %}
{% if timeago %}{# https://github.com/hustcc/timeago.js #}{% endif %}
{% if user.is_superuser %}
{# <script defer src="{{ static("SIPml-api.js") }}"></script> #}
{# <script defer src="{{ static("jssip2.0.3.min.js") }}"></script> #}
{# <script defer src="{{ static("sip-0.7.5.min.js") }}"></script> #}
{% endif %}
{% if ckeditor %}
{# <link rel="stylesheet" href="js/ckeditor/dev/builder/release/ckeditor/contents.css"> #}
  <script src="{{ static("js/ckeditor/dev/builder/release/ckeditor/ckeditor.js") }}"></script>
{% endif %}
{% if nouislider %}
  <link rel="stylesheet" href="{{ static("nouislider.8.5.1/nouislider.min.css") }}">
  <script src="{{ static("nouislider.8.5.1/nouislider.min.js") }}"></script>
{% endif %}
{% if katex %}
{# <link rel="stylesheet" href="{{ static("katex/katex.min.css") }}"> #}
  {# <script defer src="{{ static("katex/katex.min.js") }}"></script> #}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
{# <script> #}
{# $(document).ready(function() { #}
{#   $(".math, math").each(function() { #}
{#     var texTxt = $(this).text(); #}
{#     el = $(this).get(0); #}
{#     if(el.tagName == "DIV"){ #}
{#         addDisp = "\\displaystyle"; #}
{#     } else { #}
{#         addDisp = ""; #}
{#     } #}
{#     try { #}
{#         katex.render(addDisp+texTxt, el); #}
{#     } #}
{#     catch(err) { #}
{#         $(this).html("<span class='err'>"+err); #}
{#     } #}
{#   }); #}
{# }); #}
	{# </script> #}
<script>
  document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body);
  });
</script>
{% endif %}
{% if mathjax %}
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },

    "HTML-CSS": {
		availableFonts: ["TeX"],
		linebreaks: { automatic: true },
		styles: {
			".MathJax": {
				//"text-align": "center",
				//margin: "0em 1em"
			},
		//".MathJax .merror": {
		//   "background-color": "#FFFF88",
		//   "color":   "#CC0000",
		//   "border":  "1px solid #CC0000",
		//   "padding": "1px 3px",
		//   "font-style": "normal",
		//   "font-size":  "90%"
		//   }
		}
	},
	SVG: { linebreaks: { automatic: true } },
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
{% endif %}
{% if filesizejs %}
<script src="{{ static("filesize.js/3.3.0.js") }}"></script>
{% endif %}

{% if user.is_superuser %}
<script defer src="{{ static("js/api.min.js") }}"></script>
{% endif %}

<script defer src="{{ static("js/main.min.js") }}"></script>
{% if dropzone %}{# should be after main.js (getCookie() function) #}
<script defer src="{{ static("js/libs/dropzone.min.js") }}"></script>
{% if user.is_superuser %}
<script defer src="{{ static("dropzones/body.min.js") }}"></script>
{% endif %}
{% endif %}

{% if hljs %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
{% endif %}

{% if chartjs %}
<script src="/_s/js/chartjs/Chart.min.js"></script>
<script>
 /* Chart.defaults.global.responsive = true; */
 var g = Chart.defaults.global;
 g.animation=false;
 g.responsive = true;
</script>
{% endif %}
